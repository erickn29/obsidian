### Включение отладочного режима в asyncio

Функция `asyncio.run`, которую мы используем для выполнения сопрограмм, имеет именованный параметр `debug`, позволяющий включить отладочный режим. Отладочный режим предоставляет дополнительную информацию, полезную для диагностики и устранения проблем в асинхронных приложениях.

### Использование `asyncio.run` с включенным отладочным режимом

```python
asyncio.run(coroutine(), debug=True)
```

### Включение отладочного режима с помощью аргумента командной строки

Мы можем включить отладочный режим, передав аргумент `-X dev` в командной строке при запуске Python-приложения:

```bash
python3 -X dev program.py
```

### Включение отладочного режима с помощью переменной окружения

Также можно включить отладочный режим, установив переменную окружения `PYTHONASYNCIODEBUG` в значение `1`:

```bash
PYTHONASYNCIODEBUG=1 python3 program.py
```

### Пример настройки отладочного режима и медленных обратных вызовов

Отладочный режим позволяет также настроить продолжительность медленного обратного вызова. Это полезно для выявления медленных операций, которые могут задерживать выполнение других задач.

```python
import asyncio

async def main():
    loop = asyncio.get_event_loop()
    # Устанавливаем продолжительность медленного обратного вызова в 250 мс
    loop.slow_callback_duration = 0.250
    await asyncio.sleep(1)

# Включаем отладочный режим при запуске программы
asyncio.run(main(), debug=True)
```

В этом примере мы настроили цикл событий таким образом, что если любая обратная функция будет выполняться дольше 250 мс, будет выведено сообщение об этом. Это помогает диагностировать медленные операции и оптимизировать код.

### Итог

Использование отладочного режима в [[asyncio]] позволяет получить более подробную информацию о выполнении асинхронных задач, что упрощает диагностику и устранение проблем. Мы можем включить отладочный режим с помощью параметра `debug` в `asyncio.run`, аргумента командной строки `-X dev`, или установив переменную окружения `PYTHONASYNCIODEBUG`. Настройка продолжительности медленных обратных вызовов позволяет выявлять и устранять узкие места в производительности асинхронных приложений.